<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HASRA x SMAEL - Edisi Eksklusif</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '810870364294543');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=810870364294543&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
    
    <style>
        /* CSS Variables for Color Palette */
        :root {
            --gold: #FFD700;
            --moccasin: #FFE4B5;
            --tan: #D2B48C;
            --peru: #CD853F;
            --saddle-brown: #8B4513;
            --text-dark: #333;
            --text-light: #fff;
            --background-dark: #1a1a1a;
            --danger: #dc3545;
            --voucher-blue: #0c2e5a; /* Deep blue color for voucher popup */
        }
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px; /* Offset for sticky header */
        }
        body {
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            background-color: #fdfdfd;
            line-height: 1.6;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }
        section {
            padding: 60px 0;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: var(--saddle-brown);
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        h1 { font-size: 3rem; }
        h2 { font-size: 2.5rem; }
        h3 { font-size: 1.8rem; }
        p { margin-bottom: 15px; }
        /* --- Components --- */
        .btn {
            display: inline-block;
            padding: 12px 28px;
            font-size: 1rem;
            font-weight: 700;
            text-decoration: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }
        .btn-gold {
            background-color: var(--gold);
            color: var(--saddle-brown);
            border-color: var(--gold);
        }
        .btn-gold:hover {
            background-color: #e6c300;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--saddle-brown);
            border-color: var(--saddle-brown);
        }
        .btn-secondary:hover {
            background-color: var(--saddle-brown);
            color: var(--text-light);
        }
        /* --- Sticky Header --- */
        .sticky-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .header-logo {
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .header-promo-center {
            text-align: center;
            font-weight: 700;
            color: var(--peru);
        }
        .header-promo-center .price-slash {
            margin-left: 10px;
        }
        
        .header-cart-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .countdown-timer {
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .cart-icon {
            font-size: 1.5rem;
            cursor: pointer;
            position: relative;
            color: var(--saddle-brown);
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -10px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            font-weight: bold;
        }
        /* --- Section 1: Hero --- */
        #hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-light);
            padding: 0;
            overflow: hidden;
        }
        .video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }
        #hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }
        .hero-content {
            max-width: 800px;
            z-index: 1;
        }
        .hero-content h1 { color: var(--gold); }
        .hero-content .sub-headline { font-size: 1.3rem; margin-bottom: 30px; }
        .hero-content .promo-note {
            font-size: 1.1rem;
            margin: 20px 0;
            color: var(--moccasin);
        }
        .hero-content .promo-note .highlight {
            color: var(--gold);
            font-weight: 700;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .video-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 2;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* --- Section 2: Urgency --- */
        #urgency {
            background: var(--moccasin);
            text-align: center;
        }
        .urgency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .urgency-item i {
            font-size: 2.5rem;
            color: var(--peru);
            margin-bottom: 10px;
        }
        .urgency-item h4 {
            font-family: 'Montserrat', sans-serif;
            color: var(--saddle-brown);
            font-size: 1.2rem;
        }
        
        /* --- Section 3: Product Details --- */
        #details {
            background-color: #f9f9f9;
        }
        .details-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        .details-item {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .details-video {
            position: relative;
            width: 100%;
            padding-bottom: 177.78%; /* 9:16 aspect ratio (16/9 * 100%) */
            height: 0;
            overflow: hidden;
        }
        .details-video video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .details-video .video-controls {
            position: absolute;
            bottom: 15px;
            right: 15px;
            z-index: 2;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .details-carousel {
            padding: 20px;
        }
        .details-carousel h3 {
            margin-top: 0;
            margin-bottom: 20px;
        }
        .product-carousel {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 10px;
        }
        .carousel-main {
            width: 100%;
            height: 60vh;
            max-height: 600px;
            position: relative;
            background-color: #f9f9f9; /* Background for letterboxing */
        }
        .carousel-main img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Changed from cover to contain */
        }
        .carousel-thumbnails {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: var(--tan) #f1f1f1;
        }
        .carousel-thumbnails::-webkit-scrollbar {
            height: 8px;
        }
        .carousel-thumbnails::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .carousel-thumbnails::-webkit-scrollbar-thumb {
            background: var(--tan);
            border-radius: 4px;
        }
        .thumbnail {
            min-width: 100px;
            height: 100px;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 5px;
            overflow: hidden;
            background-color: #f9f9f9; /* Background for letterboxing */
        }
        .thumbnail.active {
            border-color: var(--gold);
        }
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .details-specs {
            padding: 30px;
        }
        .specs-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .specs-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        .specs-table td:first-child {
            font-weight: 700;
            color: var(--saddle-brown);
            width: 40%;
        }
        .specs-table tr:last-child td {
            border-bottom: none;
        }
        
        /* Image Modal */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .image-modal.is-open {
            display: flex;
        }
        .image-modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        .image-modal .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        
        /* --- WhatsApp Reviews Section --- */
        #whatsapp-reviews {
            background-color: #f9f9f9;
            overflow: hidden;
        }
        .reviews-scroll-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        .reviews-scroll {
            display: flex;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--tan) #f1f1f1;
            scroll-behavior: smooth;
            padding-bottom: 10px;
        }
        .reviews-scroll::-webkit-scrollbar {
            height: 8px;
        }
        .reviews-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .reviews-scroll::-webkit-scrollbar-thumb {
            background: var(--tan);
            border-radius: 4px;
        }
        .review-item {
            min-width: 300px;
            height: 533px; /* 9:16 aspect ratio */
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            flex-shrink: 0;
            margin-right: 20px; /* Gap between items */
        }
        .review-item:last-child {
            margin-right: 0;
        }
        .review-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* --- Fake Notification --- */
        .notification-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            z-index: 999;
            width: 300px;
        }
        .notification {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            animation: slideIn 0.5s ease-out;
            position: relative;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .notification-content {
            flex-grow: 1;
        }
        .notification-title {
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--saddle-brown);
        }
        .notification-message {
            font-size: 0.9rem;
            color: #666;
        }
        .notification-close {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #999;
        }
        
        /* --- Section 4: Offer --- */
        #offer { background-color: #fff9f0; }
        .offer-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        .offer-box {
            border: 2px solid var(--tan);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
        .offer-box.highlight {
            border-color: var(--gold);
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .offer-box h4 {
            font-family: 'Montserrat', sans-serif;
            background: var(--tan);
            color: white;
            padding: 5px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .offer-box.highlight h4 { background: var(--gold); color: var(--saddle-brown); }
        .offer-box .price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--saddle-brown);
            margin-bottom: 20px;
        }
        .offer-box ul {
            list-style: none;
            margin-bottom: 30px;
        }
        .offer-box ul li {
            margin-bottom: 10px;
        }
        .offer-box ul li.benefit { color: green; }
        .offer-box ul li.drawback { color: var(--danger); }
        .no-brainer-promo {
            grid-column: 1 / -1;
            margin-top: 40px;
            background: linear-gradient(135deg, var(--gold), var(--peru));
            color: white;
            text-align: center;
            padding: 40px;
            border-radius: 10px;
        }
        .no-brainer-promo h3 { color: white; }
        .no-brainer-promo .btn {
            background: white;
            color: var(--saddle-brown);
        }
        /* --- Section 5: Reviews --- */
        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .review-card {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 5px solid var(--tan);
        }
        .review-card p:first-of-type { font-style: italic; }
        .review-card p:last-of-type { font-weight: 700; text-align: right; }
        /* --- Section 6: Variations --- */
        #variations { text-align: center; }
        .variations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        .product-card {
            border: 1px solid #eee;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: contain; /* Changed from cover to contain */
            background-color: #f9f9f9; /* Background for letterboxing */
        }
        .product-card-body { padding: 15px; }
        .product-card-body h5 { margin-bottom: 15px; font-size: 1.1rem; }
        .product-card .btn-soldout {
            background-color: #ccc;
            color: #666;
            cursor: not-allowed;
        }
        
        /* Product Badge Styles */
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .badge-hot {
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            color: white;
            animation: flicker 2s infinite alternate;
        }
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                opacity: 1;
            }
            20%, 24%, 55% {
                opacity: 0.8;
            }
        }
        .badge-limited {
            background-color: var(--danger);
            color: white;
        }
        .badge-soldout {
            background-color: #666;
            color: white;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 10px 15px;
            font-size: 0.9rem;
        }
        
        /* --- Section 7: Guarantee & FAQ --- */
        .guarantee-container {
            display: flex;
            justify-content: space-around;
            text-align: center;
            gap: 20px;
            margin-bottom: 60px;
            flex-wrap: wrap;
        }
        .guarantee-item i {
            font-size: 3rem;
            color: var(--gold);
        }
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .faq-item {
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .faq-item summary {
            padding: 15px;
            font-weight: 700;
            cursor: pointer;
            list-style: none; /* Hide default arrow */
            position: relative;
        }
        .faq-item summary::-webkit-details-marker { display: none; }
        .faq-item summary::after {
            content: '\f078'; /* Font Awesome down arrow */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            right: 20px;
            transition: transform 0.3s;
        }
        .faq-item[open] summary::after {
            transform: rotate(180deg);
        }
        .faq-content {
            padding: 0 15px 15px 15px;
        }
        
        /* --- Footer --- */
        footer {
            background: var(--background-dark);
            color: var(--text-light);
            padding: 40px 0 20px 0;
            text-align: center;
        }
        .footer-content {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        footer a {
            color: var(--tan);
            text-decoration: none;
        }
        .payment-logos img {
            height: 30px;
            margin: 0 5px;
            background: white;
            border-radius: 4px;
        }
        /* --- WhatsApp Button --- */
        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            text-decoration: none;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            z-index: 999;
        }
        
        /* --- Voucher Popup --- */
        .voucher-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .voucher-popup.active {
            opacity: 1;
            visibility: visible;
        }
        
        .voucher-content {
            background-color: var(--voucher-blue);
            border-radius: 15px;
            padding: 30px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            color: white;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s;
        }
        
        .voucher-popup.active .voucher-content {
            transform: scale(1);
        }
        
        .voucher-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            color: white;
            cursor: pointer;
            background: none;
            border: none;
        }
        
        .voucher-icon {
            font-size: 60px;
            color: var(--gold);
            margin-bottom: 20px;
        }
        
        .voucher-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            font-family: 'Playfair Display', serif;
        }
        
        .voucher-amount {
            font-size: 36px;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 15px;
        }
        
        .voucher-description {
            font-size: 16px;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .voucher-timer {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .timer-unit {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            min-width: 70px;
        }
        
        .timer-value {
            font-size: 24px;
            font-weight: 700;
            display: block;
        }
        
        .timer-label {
            font-size: 12px;
            text-transform: uppercase;
        }
        
        .voucher-claim-btn {
            background-color: var(--gold);
            color: var(--saddle-brown);
            border: none;
            border-radius: 30px;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin: 0 auto;
        }
        
        .voucher-claim-btn:hover {
            background-color: #e6c300;
            transform: translateY(-3px);
        }
        
        /* --- Modals and Cart Drawer --- */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1001;
            display: none;
        }
        .overlay.is-open { display: block; }
        
        .cart-drawer {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 400px;
            height: 100%;
            background: white;
            z-index: 1002;
            transform: translateX(100%);
            transition: transform 0.4s ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .cart-drawer.is-open {
            transform: translateX(0);
        }
        .cart-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-header .close-btn { font-size: 1.5rem; cursor: pointer; }
        .cart-body {
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
        }
        .cart-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            position: relative;
        }
        .cart-item img { width: 70px; height: 70px; object-fit: cover; border-radius: 5px; }
        .cart-item-details { flex-grow: 1; }
        .cart-item .remove-item {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .cart-footer {
            padding: 20px;
            border-top: 1px solid #eee;
        }
        .discount-info {
            background: #e8f5e9;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #2e7d32;
            display: none;
        }
        .discount-info.show {
            display: block;
        }
        .price-breakdown {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .price-breakdown.original {
            text-decoration: line-through;
            color: #757575;
        }
        .price-breakdown.discount {
            color: #2e7d32;
            font-weight: 700;
        }
        
        .checkout-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            z-index: 1002;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .checkout-modal.is-open {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            visibility: visible;
        }
        .form-group { 
            margin-bottom: 20px; 
            position: relative;
        }
        .form-group label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: bold; 
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s;
            font-family: 'Montserrat', sans-serif;
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.2);
        }
        .form-group input.is-invalid,
        .form-group select.is-invalid {
            border-color: var(--danger);
        }
        .helper-text {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }
        .error-message {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }
        .error-message.show {
            display: block;
        }
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            margin-top: 20px;
        }
        .checkbox-group input {
            margin-right: 10px;
            margin-top: 4px;
        }
        .checkbox-group label {
            margin-bottom: 0;
        }
        .payment-option {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .payment-option:hover {
            border-color: var(--tan);
        }
        .payment-option.selected { 
            border-color: var(--gold); 
            border-width: 2px; 
            background-color: rgba(255, 215, 0, 0.05);
        }
        .payment-option small { color: #666; }
        
        #success-modal .modal-body { text-align: center; }
        #success-modal i { font-size: 4rem; color: #28a745; margin-bottom: 20px; }
        #success-modal .order-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: left;
        }
        
        /* Enhanced Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .loading-content {
            background-color: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .loading-overlay.active .loading-content {
            transform: scale(1);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255, 215, 0, 0.2);
            border-radius: 50%;
            border-top-color: var(--gold);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 25px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 20px;
            font-weight: 600;
            color: var(--saddle-brown);
            margin-bottom: 15px;
        }
        
        .loading-subtext {
            font-size: 16px;
            color: #666;
            line-height: 1.5;
        }
        
        .loading-progress {
            height: 6px;
            width: 100%;
            background-color: #f0f0f0;
            border-radius: 3px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .loading-progress-bar {
            height: 100%;
            width: 0;
            background-color: var(--gold);
            border-radius: 3px;
            animation: progress 3s ease-in-out infinite;
        }
        
        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        /* Payment Redirect Modal */
        .payment-redirect-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1050;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }
        
        .payment-redirect-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .payment-redirect-modal-content {
            background: white;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            text-align: center;
        }
        
        .payment-redirect-modal.active .payment-redirect-modal-content {
            transform: scale(1);
        }
        
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        /* --- Responsive Design --- */
        @media(max-width: 992px) {
            .header-promo-center { display: none; }
        }
        
        @media(max-width: 768px) {
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            .header-content { justify-content: space-between; gap: 10px; width: 100%; }
            .countdown-timer { display: none; }
            .offer-container { grid-template-columns: 1fr; }
            .offer-box.highlight { transform: scale(1); }
            .footer-content { flex-direction: column; }
            .carousel-main {
                height: 50vh;
            }
            .notification-container {
                width: 280px;
                right: 10px;
            }
            .checkout-modal {
                padding: 20px;
            }
            .variations-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            .product-card img {
                height: 180px;
            }
            .review-item {
                min-width: 250px;
                height: 444px; /* Maintain 9:16 aspect ratio */
            }
            .loading-content {
                padding: 30px;
            }
            .loading-spinner {
                width: 50px;
                height: 50px;
            }
            .loading-text {
                font-size: 18px;
            }
            .loading-subtext {
                font-size: 14px;
            }
            .voucher-content {
                padding: 20px;
            }
            .voucher-title {
                font-size: 24px;
            }
            .voucher-amount {
                font-size: 30px;
            }
            .timer-unit {
                min-width: 60px;
                padding: 8px;
            }
            .timer-value {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <header class="sticky-header">
        <div class="container">
            <div class="header-content">
                <div class="header-logo">HASRA x SMAEL</div>
                <div class="header-promo-center">
                    <span>PROMOSI! PERCUMA PENGHANTARAN Online</span>
                    <span class="price-slash"><s>RM189</s> <strong>RM95.90</strong></span>
                </div>
                <div class="header-cart-section">
                    <div class="countdown-timer">Tawaran Tamat: <span id="countdown"></span></div>
                    <div class="cart-icon" id="cart-icon-btn">
                        <i class="fa-solid fa-cart-shopping"></i>
                        <span class="cart-count" id="cart-item-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main>
        <section id="hero">
            <video class="video-bg" autoplay muted loop playsinline id="hero-video">
                <source src="https://i.imgur.com/VgQqfM3.mp4" type="video/mp4">
            </video>
            <div class="video-controls" id="video-sound-toggle">
                <i class="fa-solid fa-volume-xmark"></i>
            </div>
            <div class="hero-content">
                <h1>HASRA X SMAEL: The Exclusive</h1>
                <p class="sub-headline">50% OFF, Harga ASAL RM189 sekarang Jadi RM95.90</p>
                <p class="promo-note">Untuk <span class="highlight">tinggal 5 lagi</span> pembeli terawal sahaja!</p>
                <a href="#variations" class="btn btn-gold">Beli dengan Harga Promo</a>
            </div>
        </section>
        
        <section id="urgency">
            <div class="container">
                <h2>JANGAN LEPASKAN PELUANG!</h2>
                <p>Harga Asal RM189. Jimat Lebih 50%! Tawaran Akan Tamat Bila-bila Masa.</p>
                <div class="urgency-grid">
                    <div class="urgency-item">
                        <i class="fa-solid fa-fire-flame-curved"></i>
                        <h4>50% OFF</h4>
                        <p>Harga Pengenalan Istimewa.</p>
                    </div>
                    <div class="urgency-item">
                        <i class="fa-solid fa-truck-fast"></i>
                        <h4>FREE SHIPPING</h4>
                        <p>Untuk pembayaran online sahaja.</p>
                    </div>
                    <div class="urgency-item">
                        <i class="fa-solid fa-star"></i>
                        <h4>PREMIUM QUALITY</h4>
                        <p>Jaminan Kualiti Antarabangsa.</p>
                    </div>
                    <div class="urgency-item">
                        <i class="fa-solid fa-lock"></i>
                        <h4>LIMITED STOCK</h4>
                        <p>Hanya 250 unit untuk Sahaja!</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="details">
            <div class="container">
                <div class="details-container">
                    <div class="details-item">
                        <div class="details-video">
                            <video autoplay muted loop playsinline id="product-video">
                                <source src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Specvideo.mp4" type="video/mp4">
                            </video>
                            <div class="video-controls" id="product-video-sound-toggle">
                                <i class="fa-solid fa-volume-xmark"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="details-item">
                        <div class="details-carousel">
                            <h3>Lihat Dengan Lebih Dekat</h3>
                            <div class="product-carousel">
                                <div class="carousel-main">
                                    <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des1.jpg" id="main-image">
                                </div>
                                <div class="carousel-thumbnails" id="thumbnails">
                                    <div class="thumbnail active" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des1.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des1.jpg?text=1" alt="Thumbnail 1">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des2.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des2.jpg?text=2" alt="Thumbnail 2">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des3.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des3.jpg?text=3" alt="Thumbnail 3">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des4.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des4.jpg?text=4" alt="Thumbnail 4">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des5.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des5.jpg?text=5" alt="Thumbnail 5">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des6.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des6.jpg?text=6" alt="Thumbnail 6">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des7.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des7.jpg?text=7" alt="Thumbnail 7">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des8.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des8.jpg?text=8" alt="Thumbnail 8">
                                    </div>
                                    <div class="thumbnail" data-src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des9.jpg">
                                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/des9.jpg?text=9" alt="Thumbnail 9">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="details-item">
                        <div class="details-specs">
                            <h3>Spesifikasi</h3>
                            <p>Setiap jam tangan HASRA x SMAEL direka dengan teliti untuk ketahanan dan gaya.</p>
                            <table class="specs-table">
                                <tbody>
                                    <tr><td>Brand</td><td>SMAEL Premium</td></tr>
                                    <tr><td>Collaboration</td><td>HASRA Exclusive Edition</td></tr>
                                    <tr><td>Movement</td><td>Japan Quartz Movement & Digital Display</td></tr>
                                    <tr><td>Strap Material</td><td>Premium Silicone-Rubber Compound</td></tr>
                                    <tr><td>Glass</td><td>Hardlex Crystal Glass (Anti-Calar)</td></tr>
                                    <tr><td>Water Resistance</td><td>5 ATM (50meter Water-resistant)</td></tr>
                                    <tr><td>Features</td><td>Date, Stopwatch, Alarm, LED Backlight</td></tr>
                                    <tr><td>Warranty</td><td>1-Year Engine Warranty</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="whatsapp-reviews">
            <div class="container">
                <h2 style="text-align: center;">WhatsApp Reviews</h2>
                <div class="reviews-scroll-container">
                    <div class="reviews-scroll" id="reviews-scroll">
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/1.png?text=WhatsApp+Review+1" alt="WhatsApp Review 1">
                        </div>
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/2.png?text=WhatsApp+Review+2" alt="WhatsApp Review 2">
                        </div>
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/3.png?text=WhatsApp+Review+3" alt="WhatsApp Review 3">
                        </div>
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/4.png" alt="WhatsApp Review 4">
                        </div>
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/5.png" alt="WhatsApp Review 5">
                        </div>
                        <div class="review-item">
                            <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/6.png" alt="WhatsApp Review 6">
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="reviews">
            <div class="container">
                <h2 style="text-align: center;">Lihat Apa Kata Pelanggan Kami</h2>
                <div class="reviews-grid">
                    <div class="review-card">
                        <p>"Jam sampai laju giler! Bayar online semalam, hari ni dah dapat. Kualiti memang premium, nampak mahal. Thank you!"</p>
                        <p>- Azlan, JB</p>
                    </div>
                    <div class="review-card">
                        <p>"Design exclusive betul. Tak nampak kat tempat lain. Memang berbaloi dengan harga promo ni."</p>
                        <p>- Syahira, KL</p>
                    </div>
                    <div class="review-card">
                        <p>"Bought 2, one for me and one for my dad. Both of us love it. The gold colour is stunning."</p>
                        <p>- Daniel, Penang</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="offer">
            <div class="container">
                <h2 style="text-align: center;">PILIH PAKEJ ANDA & MAKSIMUMKAN PENJIMATAN!</h2>
                <div class="offer-container">
                    <div class="offer-box highlight">
                        <h4>PAKEJ BIJAK (PALING LARIS)</h4>
                        <p class="price">RM95.90</p>
                        <ul>
                            <li class="benefit"><i class="fa-solid fa-circle-check"></i> PERCUMA Shipping Seluruh Malaysia</li>
                            <li class="benefit"><i class="fa-solid fa-circle-check"></i> PANTAS Penghantaran (2-5 Hari)</li>
                            <li class="benefit"><i class="fa-solid fa-circle-check"></i> CEPAT Barang dipos dalam 24 Jam</li>
                            <li class="benefit"><i class="fa-solid fa-circle-check"></i> SELAMAT Pembayaran Online</li>
                        </ul>
                        <a href="#variations" class="btn btn-gold">Beli 1 (Bayar Online)</a>
                    </div>
                    <div class="offer-box">
                        <h4>PAKEJ ASAS</h4>
                        <p class="price">RM110.90</p>
                        <ul>
                            <li class="drawback"><i class="fa-solid fa-circle-xmark"></i> Caj Tambahan RM15</li>
                            <li class="drawback"><i class="fa-solid fa-circle-xmark"></i> Penghantaran Lambat (5-7 Hari)</li>
                            <li><i class="fa-solid fa-box"></i> Bayar pada posmen</li>
                            <li><i class="fa-solid fa-box"></i> Barang Sampai Baru Bayar</li>
                        </ul>
                        <a href="#variations" class="btn btn-secondary">Pilih COD</a>
                    </div>
                </div>
                <div class="no-brainer-promo">
                    <h3>PROMO JIMAT BERGANDA!</h3>
                    <p>Sesuai untuk hadiah atau koleksi peribadi. Dapatkan 2 unit pada harga hanya <strong>RM171.90</strong> sahaja! (Jimat RM20.00 lagi!). Percuma penghantaran bila anda bayar online.</p>
                    <a href="#variations" class="btn">SAYA NAK PROMO 2 UNIT!</a>
                </div>
            </div>
        </section>
        
        <section id="variations">
            <div class="container">
                <h2>Langkah Terakhir! Pilih Warna Kegemaran Anda</h2>
                <p>Pilih warna dan klik 'Tambah Ke Troli'. Stok adalah terhad!</p>
                <div class="variations-grid">
                    <div class="product-card">
                        <div class="product-badge badge-hot">
                            <i class="fa-solid fa-fire"></i>
                            <span>Hot</span>
                        </div>
                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/BlackGOLD.jpg?text=Black+Gold" alt="Black Gold Watch">
                        <div class="product-card-body">
                            <h5>Black Gold</h5>
                            <button class="btn btn-gold add-to-cart-btn" data-name="Black Gold" data-price="95.90" data-img="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/BlackGOLD.jpg?text=Black+Gold">Add To Cart</button>
                        </div>
                    </div>
                    <div class="product-card">
                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Midnightblack.jpg?text=Midnight+Black" alt="Midnight Black Watch">
                        <div class="product-card-body">
                            <h5>Midnight Black</h5>
                            <button class="btn btn-gold add-to-cart-btn" data-name="Midnight Black" data-price="95.90" data-img="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Midnightblack.jpg?text=Midnight+Black">Add To Cart</button>
                        </div>
                    </div>
                    <div class="product-card">
                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Royal%20Yellow.jpg?text=Royal+Yellow" alt="Royal Yellow Watch">
                        <div class="product-card-body">
                            <h5>Royal Yellow</h5>
                            <button class="btn btn-gold add-to-cart-btn" data-name="Royal Yellow" data-price="95.90" data-img="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Royal%20Yellow.jpg?text=Royal+Yellow">Add To Cart</button>
                        </div>
                    </div>
                    <div class="product-card">
                        <div class="product-badge badge-limited">
                            <i class="fa-solid fa-clock"></i>
                            <span>Limited Stock</span>
                        </div>
                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Royal%20Blue.jpg?text=Royal+Blue" alt="Royal Blue Watch">
                        <div class="product-card-body">
                            <h5>Royal Blue</h5>
                            <button class="btn btn-gold add-to-cart-btn" data-name="Royal Blue" data-price="95.90" data-img="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Royal%20Blue.jpg?text=Royal+Blue">Add To Cart</button>
                        </div>
                    </div>
                    <div class="product-card">
                        <div class="product-badge badge-soldout">
                            <i class="fa-solid fa-xmark"></i>
                            <span>Sold Out</span>
                        </div>
                        <img src="https://cdn.jsdelivr.net/gh/hasrastore-ops/smaelmedia@v1.0/Green.jpg?text=Green" alt="Green Watch">
                        <div class="product-card-body">
                            <h5>Green</h5>
                            <button class="btn btn-soldout" disabled>HABIS DIJUAL</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="guarantee">
            <div class="container">
                <h2 style="text-align: center;">Beli Tanpa Ragu</h2>
                <div class="guarantee-container">
                    <div class="guarantee-item">
                        <i class="fa-solid fa-shield-halved"></i>
                        <h4>100% Secure Checkout</h4>
                        <p>Pay Online with Confidence.</p>
                    </div>
                    <div class="guarantee-item">
                        <i class="fa-solid fa-box-open"></i>
                        <h4>7-Day Return Policy</h4>
                        <p>Tidak berpuas hati? Pulangkan.</p>
                    </div>
                    <div class="guarantee-item">
                        <i class="fa-solid fa-award"></i>
                        <h4>1-Year Warranty</h4>
                        <p>Jaminan kerosakan enjin.</p>
                    </div>
                </div>
                <div class="faq-container">
                    <details class="faq-item">
                        <summary>Macam mana kalau sampai tapi tak berkenan ?</summary>
                        <div class="faq-content">
                            <p>Tiada masalah. Kami tawarkan polisi pemulangan 7 hari. Hanya hubungi kami dan kami akan bantu proses pemulangan & bayaran balik, selagi jam dalam keadaan asal.</p>
                        </div>
                    </details>
                    <details class="faq-item">
                        <summary>Berapa hari sampai?</summary>
                        <div class="faq-content">
                            <p>Sangat pantas! Untuk pembayaran online, kami akan pos dalam masa 24 jam dan anda boleh jangkakan ia sampai dalam 2-5 hari bekerja. Untuk COD, ia mengambil masa 5-7 hari bekerja kerana proses manual oleh kurier.</p>
                        </div>
                    </details>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="container footer-content">
            <div class="footer-col">
                <h4>HASRASTORE</h4>
                <p>Your partner in style & success.</p>
            </div>
            <div class="footer-col">
                <h4>Hubungi Kami</h4>
                <p>WhatsApp: <a href="https://api.whatsapp.com/send?phone=601127412402&text=Hi,%20saya%20nak%20tanya%20pasal%20jam%20Exclusive%20collaboration" target="_blank">+6011-2741 2402</a></p>
                <p>Email: <a href="mailto:support@hasra.com">support@hasra.com</a></p>
            </div>
            <div class="footer-col">
                <h4>Alamat</h4>
                <p>No 10, Jalan 332, 15200 Kota Bharu, Kelantan, Malaysia.</p>
            </div>
        </div>
        <div class="payment-logos">
            <img src="https://toyyibpay.com/assets/images/fp_logo.png" alt="FPX">
            <img src="https://toyyibpay.com/assets/images/visa_logo.png" alt="Visa">
            <img src="https://toyyibpay.com/assets/images/mc_logo.png" alt="Mastercard">
        </div>
        <p class="copyright"> <span id="current-year"></span> HASRASTORE. All Rights Reserved.</p>
    </footer>
    <a href="https://api.whatsapp.com/send?phone=601127412402&text=Hi,%20saya%20nak%20tanya%20pasal%20jam%20Exclusive%20collaboration" class="whatsapp-float" target="_blank">
        <i class="fa-brands fa-whatsapp"></i>
    </a>
    
    <!-- Voucher Popup -->
    <div class="voucher-popup" id="voucher-popup">
        <div class="voucher-content">
            <button class="voucher-close" id="voucher-close">&times;</button>
            <div class="voucher-icon">
                <i class="fa-solid fa-gift"></i>
            </div>
            <h2 class="voucher-title">Tahniah! Anda Dapat Voucher</h2>
            <div class="voucher-amount">RM93.10 Off</div>
            <p class="voucher-description">Voucher ini sah selama 15 minit sahaja. Sila gunakan segera untuk pembelian anda!</p>
            <div class="voucher-timer" id="voucher-timer">
                <div class="timer-unit">
                    <span class="timer-value" id="voucher-minutes">15</span>
                    <span class="timer-label">Minutes</span>
                </div>
                <div class="timer-unit">
                    <span class="timer-value" id="voucher-seconds">00</span>
                    <span class="timer-label">Seconds</span>
                </div>
            </div>
            <button class="voucher-claim-btn" id="voucher-claim-btn">Claim</button>
        </div>
    </div>
    
    <div class="overlay"></div>
    <div class="cart-drawer" id="cart-drawer">
        <div class="cart-header">
            <h3>Troli Beli-Belah</h3>
            <span class="close-btn" id="close-cart-btn">&times;</span>
        </div>
        <div class="cart-body" id="cart-body">
            <p>Your cart is empty.</p>
        </div>
        <div class="cart-footer">
            <div class="discount-info" id="discount-info">
                <p><strong>Tahniah! Anda mendapat harga istimewa:</strong></p>
                <div class="price-breakdown original">
                    <span>Harga Asal:</span>
                    <span id="original-price">RM0.00</span>
                </div>
                <div class="price-breakdown discount">
                    <span>Harga Anda:</span>
                    <span id="discounted-price">RM0.00</span>
                </div>
                <p>Jimat <span id="savings-amount">RM0.00</span>!</p>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <strong>Jumlah:</strong>
                <strong id="cart-total">RM0.00</strong>
            </div>
            <p style="text-align:center; font-size: 0.9rem; color: green; margin-bottom: 15px;">Tahniah! Anda layak dapat PENGHANTARAN PERCUMA jika bayar online!</p>
            <button class="btn btn-gold" style="width: 100%;" id="confirm-order-btn">Sahkan Pesanan</button>
        </div>
    </div>
    
    <div id="checkout-modal" class="checkout-modal">
        <div class="cart-header">
            <h3>Isi Maklumat Penghantaran</h3>
            <span class="close-btn" id="close-checkout-btn">&times;</span>
        </div>
        <form id="checkout-form" novalidate>
            <div class="form-group">
                <label for="fullName">Nama Penuh</label>
                <input type="text" id="fullName" required>
                <div class="helper-text">Masukkan nama sebenar</div>
                <div class="error-message" id="fullName-error">Sila isi nama penuh anda</div>
            </div>
            <div class="form-group">
                <label for="phone">Nombor Telefon (WhatsApp)</label>
                <input type="tel" id="phone" required placeholder="0123456789">
                <div class="helper-text">Isi nombor telephone yang ada whatsapp</div>
                <div class="error-message" id="phone-error">Format: 0123456789. Nombor mesti boleh WhatsApp</div>
            </div>
            <div class="form-group">
                <label for="address">Alamat Penuh</label>
                <input type="text" id="address" required>
                <div class="helper-text">Masukkan alamat yang betul</div>
                <div class="error-message" id="address-error">Sila isi alamat lengkap</div>
            </div>
            <div class="form-group">
                <label for="postcode">Poskod</label>
                <input type="text" id="postcode" required pattern="\d{5}">
                <div class="helper-text">Pastikan poskod betul</div>
                <div class="error-message" id="postcode-error">Sila isi 5 digit poskod</div>
            </div>
            <div class="form-group">
                <label for="state">Negeri</label>
                <select id="state" required>
                    <option value="">Pilih Negeri</option>
                    <option value="Johor">Johor</option>
                    <option value="Kedah">Kedah</option>
                    <option value="Kelantan">Kelantan</option>
                    <option value="Melaka">Melaka</option>
                    <option value="Negeri Sembilan">Negeri Sembilan</option>
                    <option value="Pahang">Pahang</option>
                    <option value="Perak">Perak</option>
                    <option value="Perlis">Perlis</option>
                    <option value="Pulau Pinang">Pulau Pinang</option>
                    <option value="Sabah">Sabah</option>
                    <option value="Sarawak">Sarawak</option>
                    <option value="Selangor">Selangor</option>
                    <option value="Terengganu">Terengganu</option>
                    <option value="W.P. Kuala Lumpur">W.P. Kuala Lumpur</option>
                    <option value="W.P. Labuan">W.P. Labuan</option>
                    <option value="W.P. Putrajaya">W.P. Putrajaya</option>
                </select>
                <div class="helper-text">Pilih negeri penghantaran</div>
                <div class="error-message" id="state-error">Sila pilih negeri</div>
            </div>
            <h4>Pilihan Pembayaran</h4>
            <div class="payment-option selected" data-payment="online">
                <input type="radio" name="payment" id="payment-online" value="online" checked style="display:none;">
                <strong>Online Payment (FPX/Kad Debit)</strong>
                <small><br>PERCUMA Shipping | Jam Sampai (1-5 hari)</small>
            </div>
            <div class="payment-option" data-payment="cod">
                 <input type="radio" name="payment" id="payment-cod" value="cod" style="display:none;">
                <strong>Cash On Delivery (COD)</strong>
                <small><br>+RM15 Caj Kurier | Jam Sampai (5-7 hari)</small>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="confirm-data" required>
                <label for="confirm-data">Ya, maklumat yang saya berikan adalah tepat.</label>
            </div>
            <div class="error-message" id="confirm-error" style="margin-top: 5px;">Sila sahkan maklumat anda adalah tepat</div>
            <button type="submit" class="btn btn-gold" style="width: 100%; margin-top: 20px;">Buat Pesanan Sekarang</button>
        </form>
    </div>
    <div id="success-modal" class="checkout-modal">
        <div class="modal-body">
            <i class="fa-solid fa-circle-check"></i>
            <h3>Pesanan Anda Telah Diterima!</h3>
            <div class="order-details">
                <p><strong>Order ID:</strong> <span id="order-id"></span></p>
                <p><strong>Tarikh:</strong> <span id="order-date"></span></p>
                <p><strong>Jumlah:</strong> <span id="order-total"></span></p>
            </div>
            <div id="success-message-content"></div>
            <button class="btn btn-secondary close-success-btn" style="margin-top: 20px;">Tutup</button>
        </div>
    </div>
    
    <div class="image-modal" id="image-modal">
        <span class="close-modal" id="close-image-modal">&times;</span>
        <img src="" alt="Zoomed Image" id="zoomed-image">
    </div>
    
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Enhanced Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Memproses tempahan anda...</div>
            <div class="loading-subtext">Sila tunggu sebentar, jangan tutup halaman ini</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Payment Loading Modal -->
    <div id="paymentLoadingModal" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Menghubungkan ke sistem pembayaran...</div>
            <div class="loading-subtext">Sila tunggu, anda akan diarahkan ke halaman pembayaran dalam masa terdekat</div>
            <div class="loading-progress">
                <div class="loading-progress-bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Payment Redirect Modal -->
    <div id="paymentRedirectModal" class="payment-redirect-modal">
        <div class="payment-redirect-modal-content">
            <i class="fas fa-credit-card text-blue-500 text-5xl mb-4"></i>
            <h3 class="text-2xl font-bold mb-2">Pembayaran Dalam Talian</h3>
            <p class="mb-6">Klik butang di bawah untuk meneruskan ke pembayaran.</p>
            <button id="manualRedirectBtn" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition mb-4">
                Teruskan Pembayaran
            </button>
            <div class="flex items-center justify-center mt-4">
                <p class="text-sm text-gray-600 mr-2">Jika butang tidak berfungsi, cuba lagi atau hubungi kami melalui WhatsApp:</p>
                <a href="https://api.whatsapp.com/send?phone=601127412402&text=Hi,%20saya%20nak%20tanya%20pasal%20jam%20Exclusive%20collaboration" target="_blank" class="text-green-500 hover:text-green-600">
                    <i class="fab fa-whatsapp text-2xl"></i>
                </a>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // ====================================
        //      CONFIGURATION
        // ====================================
        const TELEGRAM_CONFIG = {
            botToken: '8390631438:AAGUletc8b6kFztiuysYOWHlvYTj4tXNwy4',
            chatId: '642142575'
        };
        
        const TOYYIBPAY_CONFIG = {
            userSecretKey: 'b2kcp05o-b5m0-q000-55i7-w3j57riufv7h',
            categoryCode: 'ltigdivv',
            callbackUrl: 'https://hasrastore.com/payment-callback.html',
            returnUrl: 'https://hasrastore.com/payment-success.html',
            failedUrl: 'https://hasrastore.com/payment-failed.html'
        };
        
        // ====================================
        //      VOUCHER POPUP
        // ====================================
        const voucherPopup = document.getElementById('voucher-popup');
        const voucherCloseBtn = document.getElementById('voucher-close');
        const voucherClaimBtn = document.getElementById('voucher-claim-btn');
        const voucherMinutes = document.getElementById('voucher-minutes');
        const voucherSeconds = document.getElementById('voucher-seconds');
        
        // Check if it's the user's first visit
        const hasVisited = localStorage.getItem('hasVisited');
        
        if (!hasVisited) {
            // Show voucher popup after 1 second
            setTimeout(() => {
                voucherPopup.classList.add('active');
                startVoucherTimer();
            }, 1000);
            
            // Mark as visited
            localStorage.setItem('hasVisited', 'true');
        }
        
        // Close voucher popup
        voucherCloseBtn.addEventListener('click', () => {
            voucherPopup.classList.remove('active');
        });
        
        // Claim voucher button
        voucherClaimBtn.addEventListener('click', () => {
            voucherPopup.classList.remove('active');
            // Show notification that voucher has been claimed
            showNotification('Voucher berjaya dituntung! RM93.10 akan dipotong semasa pembayaran.', 'success');
        });
        
        // Start voucher countdown timer
        function startVoucherTimer() {
            let timeInSeconds = 15 * 60; // 15 minutes
            
            const voucherTimer = setInterval(() => {
                timeInSeconds--;
                
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                
                voucherMinutes.textContent = minutes.toString().padStart(2, '0');
                voucherSeconds.textContent = seconds.toString().padStart(2, '0');
                
                if (timeInSeconds <= 0) {
                    clearInterval(voucherTimer);
                    voucherPopup.classList.remove('active');
                }
            }, 1000);
        }
        
        // ====================================
        //      META PIXEL EVENTS
        // ====================================
        // Track page view
        fbq('track', 'ViewContent', {
            content_name: 'HASRA x SMAEL: The Exclusive',
            content_category: 'Watches',
            content_ids: ['SMAEL-Exclusive'],
            content_type: 'product_group',
            value: 95.90,
            currency: 'MYR'
        });
        
        // ====================================
        //      COUNTDOWN TIMER
        // ====================================
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            if (!countdownElement) return;
            let timeInSeconds = 2 * 60 * 60; // 2 hours
            const timer = setInterval(() => {
                timeInSeconds--;
                const hours = Math.floor(timeInSeconds / 3600);
                const minutes = Math.floor((timeInSeconds % 3600) / 60);
                const seconds = timeInSeconds % 60;
                countdownElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeInSeconds <= 0) {
                    clearInterval(timer);
                    countdownElement.textContent = "Tawaran Tamat!";
                }
            }, 1000);
        }
        
        // ====================================
        //      VIDEO SOUND TOGGLE
        // ====================================
        const heroVideo = document.getElementById('hero-video');
        const soundToggle = document.getElementById('video-sound-toggle');
        soundToggle.addEventListener('click', () => {
            if (heroVideo.muted) {
                heroVideo.muted = false;
                soundToggle.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
            } else {
                heroVideo.muted = true;
                soundToggle.innerHTML = '<i class="fa-solid fa-volume-xmark"></i>';
            }
        });
        
        const productVideo = document.getElementById('product-video');
        const productVideoSoundToggle = document.getElementById('product-video-sound-toggle');
        productVideoSoundToggle.addEventListener('click', () => {
            if (productVideo.muted) {
                productVideo.muted = false;
                productVideoSoundToggle.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
            } else {
                productVideo.muted = true;
                productVideoSoundToggle.innerHTML = '<i class="fa-solid fa-volume-xmark"></i>';
            }
        });
        
        // ====================================
        //      PRODUCT CAROUSEL
        // ====================================
        const mainImage = document.getElementById('main-image');
        const thumbnails = document.querySelectorAll('.thumbnail');
        const imageModal = document.getElementById('image-modal');
        const zoomedImage = document.getElementById('zoomed-image');
        const closeImageModal = document.getElementById('close-image-modal');
        
        thumbnails.forEach(thumbnail => {
            thumbnail.addEventListener('click', () => {
                const src = thumbnail.dataset.src;
                mainImage.src = src;
                
                // Update active thumbnail
                thumbnails.forEach(t => t.classList.remove('active'));
                thumbnail.classList.add('active');
            });
        });
        
        // Click on main image to zoom
        mainImage.addEventListener('click', () => {
            zoomedImage.src = mainImage.src;
            imageModal.classList.add('is-open');
        });
        
        closeImageModal.addEventListener('click', () => {
            imageModal.classList.remove('is-open');
        });
        
        imageModal.addEventListener('click', (e) => {
            if (e.target === imageModal) {
                imageModal.classList.remove('is-open');
            }
        });
        
        // ====================================
        //      WHATSAPP REVIEWS AUTO SCROLL
        // ====================================
        const reviewsScroll = document.getElementById('reviews-scroll');
        const reviewItems = reviewsScroll.querySelectorAll('.review-item');
        let isAutoScrolling = true;
        let scrollInterval;
        let scrollTimeout;
        
        // Clone the items for seamless scrolling
        reviewItems.forEach(item => {
            const clone = item.cloneNode(true);
            reviewsScroll.appendChild(clone);
        });
        
        // Auto scroll function
        function startAutoScroll() {
            if (!isAutoScrolling) return;
            
            scrollInterval = setInterval(() => {
                // If we've reached the end of the original items, reset scroll position
                if (reviewsScroll.scrollLeft >= reviewsScroll.scrollWidth / 2) {
                    reviewsScroll.scrollLeft = 0;
                } else {
                    reviewsScroll.scrollLeft += 1;
                }
            }, 30);
        }
        
        // Stop auto scroll function
        function stopAutoScroll() {
            clearInterval(scrollInterval);
            clearTimeout(scrollTimeout);
            
            // Resume auto scroll after 3 seconds of inactivity
            scrollTimeout = setTimeout(() => {
                isAutoScrolling = true;
                startAutoScroll();
            }, 3000);
        }
        
        // Pause auto-scroll when user interacts with the reviews
        reviewsScroll.addEventListener('mouseenter', () => {
            isAutoScrolling = false;
            stopAutoScroll();
        });
        
        reviewsScroll.addEventListener('touchstart', () => {
            isAutoScrolling = false;
            stopAutoScroll();
        });
        
        // Resume auto-scroll when user stops interacting
        reviewsScroll.addEventListener('mouseleave', () => {
            if (!isAutoScrolling) {
                isAutoScrolling = true;
                startAutoScroll();
            }
        });
        
        // Start auto-scroll on page load
        startAutoScroll();
        
        // ====================================
        //      FAKE NOTIFICATIONS
        // ====================================
        const notificationContainer = document.getElementById('notification-container');
        const notifications = [
            { name: "Ahmad Yusuf", location: "Selangor", product: "Black Gold", payment: "Online Payment" },
            { name: "Siti Aisyah", location: "Kuala Lumpur", product: "Royal Blue", payment: "Online Payment" },
            { name: "Mohd Faris", location: "Penang", product: "Midnight Black", payment: "Online Payment" },
            { name: "Nurul Izzah", location: "Johor", product: "Royal Yellow", payment: "Online Payment" },
            { name: "Razman Hakim", location: "Perak", product: "Black Gold", payment: "Online Payment" },
            { name: "Fatimah Zahra", location: "Kedah", product: "Royal Blue", payment: "Online Payment" },
            { name: "Amirul Hafiz", location: "Melaka", product: "Midnight Black", payment: "Online Payment" },
            { name: "Sarah Nadia", location: "Negeri Sembilan", product: "Royal Yellow", payment: "Online Payment" }
        ];
        
        function getRandomTime() {
            const minMinutes = 15;
            const maxMinutes = 300; // 5 hours
            const randomMinutes = Math.floor(Math.random() * (maxMinutes - minMinutes + 1)) + minMinutes;
            
            if (randomMinutes < 60) {
                return `${randomMinutes} minit`;
            } else {
                const hours = Math.floor(randomMinutes / 60);
                const minutes = randomMinutes % 60;
                return minutes > 0 ? `${hours} jam ${minutes} minit` : `${hours} jam`;
            }
        }
        
        function showNotification(message, type = 'info') {
            const notificationEl = document.createElement('div');
            notificationEl.className = 'notification';
            
            if (type === 'success') {
                notificationEl.innerHTML = `
                    <div class="notification-content">
                        <div class="notification-title">Berjaya!</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close">&times;</button>
                `;
            } else {
                const randomIndex = Math.floor(Math.random() * notifications.length);
                const notification = notifications[randomIndex];
                const timeAgo = getRandomTime();
                
                notificationEl.innerHTML = `
                    <div class="notification-content">
                        <div class="notification-title">Pesanan Baru!</div>
                        <div class="notification-message">${notification.name} dari ${notification.location} telah Order ${notification.product} - ${notification.payment} ${timeAgo} yang lepas</div>
                    </div>
                    <button class="notification-close">&times;</button>
                `;
            }
            
            notificationContainer.appendChild(notificationEl);
            
            // Add event listener to close button
            const closeBtn = notificationEl.querySelector('.notification-close');
            closeBtn.addEventListener('click', () => {
                notificationEl.remove();
            });
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notificationEl.parentNode) {
                    notificationEl.remove();
                }
            }, 5000);
        }
        
        // Show first notification after 2 seconds
        setTimeout(showNotification, 2000);
        
        // Show notifications at random intervals between 30-60 seconds
        function scheduleNotification() {
            const randomDelay = Math.floor(Math.random() * 30000) + 30000; // 30-60 seconds
            setTimeout(() => {
                showNotification();
                scheduleNotification();
            }, randomDelay);
        }
        
        scheduleNotification();
        
        // ====================================
        //      MODAL & DRAWER CONTROLS
        // ====================================
        const overlay = document.querySelector('.overlay');
        const cartDrawer = document.getElementById('cart-drawer');
        const checkoutModal = document.getElementById('checkout-modal');
        const successModal = document.getElementById('success-modal');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const paymentLoadingModal = document.getElementById('paymentLoadingModal');
        const paymentRedirectModal = document.getElementById('paymentRedirectModal');
        
        function openModal(modalElement) {
            overlay.classList.add('is-open');
            modalElement.classList.add('is-open');
        }
        
        function closeModal() {
            overlay.classList.remove('is-open');
            document.querySelectorAll('.is-open').forEach(el => el.classList.remove('is-open'));
        }
        
        function showLoading() {
            loadingOverlay.classList.add('active');
        }
        
        function hideLoading() {
            loadingOverlay.classList.remove('active');
        }
        
        function showPaymentLoading() {
            paymentLoadingModal.classList.add('active');
        }
        
        function hidePaymentLoading() {
            paymentLoadingModal.classList.remove('active');
        }
        
        document.getElementById('cart-icon-btn').addEventListener('click', () => openModal(cartDrawer));
        document.getElementById('close-cart-btn').addEventListener('click', closeModal);
        document.getElementById('confirm-order-btn').addEventListener('click', () => {
            if (cart.length > 0) {
                closeModal();
                openModal(checkoutModal);
            } else {
                alert('Troli anda kosong!');
            }
        });
        document.getElementById('close-checkout-btn').addEventListener('click', closeModal);
        document.querySelectorAll('.close-success-btn').forEach(btn => btn.addEventListener('click', closeModal));
        overlay.addEventListener('click', closeModal);
        
        // ====================================
        //      TELEGRAM NOTIFICATION
        // ====================================
        async function sendTelegramNotification(orderData) {
            const paymentStatusText = orderData.paymentStatus === 'Paid' ? 
                ' <b>TELAH DIBAYAR</b>' : 
                ' <b>MENUNGGU PEMBAYARAN</b>';
                
            // Format the date and time
            const orderDateTime = new Date().toLocaleString('ms-MY', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Prepend "Smael" to product names for Telegram
            const telegramProducts = orderData.product.split(', ').map(product => {
                return `Smael ${product}`;
            }).join(', ');
                
            const message = `
 <b>PESANAN BARU</b> 
${paymentStatusText}
 <b>PRODUK:</b> ${telegramProducts}
 <b>KUANTITI:</b> ${orderData.quantity}
 <b>JUMLAH:</b> RM${orderData.total}
 <b>MAKLUMAT PELANGGAN:</b>
 <b>Nama:</b> ${orderData.customerName}
 <b>No Telefon:</b> ${orderData.customerPhone}
 <b>Alamat:</b> ${orderData.customerAddress}
 <b>Poskod:</b> ${orderData.poskod}
 <b>Negeri:</b> ${orderData.customerState}
 <b>JENIS PEMBAYARAN:</b> ${orderData.paymentMethod}
 <b>MASA:</b> ${orderDateTime}
 <b>SILA PROSESKAN PESANAN INI SECEPAT MUNGKIN</b>
            `;
            
            const url = `https://api.telegram.org/bot${TELEGRAM_CONFIG.botToken}/sendMessage`;
            const payload = {
                chat_id: TELEGRAM_CONFIG.chatId,
                text: message,
                parse_mode: 'HTML'
            };
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                
                if (data.ok) {
                    return true;
                } else {
                    console.error('Telegram API error:', data);
                    return false;
                }
            } catch (error) {
                console.error('Error sending Telegram notification:', error);
                return false;
            }
        }
        
        // ====================================
        //      TOYYIBPAY INTEGRATION
        // ====================================
        function generateBillNo() {
            const timestamp = Date.now();
            const random = Math.floor(Math.random() * 1000);
            return `HS${timestamp}${random}`;
        }
        
        function showPaymentRedirectModal(billCode) {
            const modal = document.getElementById('paymentRedirectModal');
            modal.classList.add('active');
            
            // Set up the redirect button
            document.getElementById('manualRedirectBtn').onclick = function() {
                window.location.href = `https://toyyibpay.com/${billCode}`;
            };
        }
        
        async function redirectToToyyibPay(orderData) {
            console.log('Starting ToyyibPay redirect with order data:', orderData);
            
            const billNo = generateBillNo();
            const amount = orderData.total;
            
            // Extract product code for shorter bill name
            let productCode = orderData.product;
            if (productCode.includes("Black Gold")) {
                productCode = "BlackGold";
            } else if (productCode.includes("Midnight Black")) {
                productCode = "MidnightBlack";
            } else if (productCode.includes("Royal Yellow")) {
                productCode = "RoyalYellow";
            } else if (productCode.includes("Royal Blue")) {
                productCode = "RoyalBlue";
            }
            
            // Calculate expiry date (3 days from now)
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + 3);
            const formattedExpiryDate = 
                `${expiryDate.getDate().toString().padStart(2, '0')}-` +
                `${(expiryDate.getMonth() + 1).toString().padStart(2, '0')}-` +
                `${expiryDate.getFullYear()} ` +
                `${expiryDate.getHours().toString().padStart(2, '0')}:` +
                `${expiryDate.getMinutes().toString().padStart(2, '0')}:` +
                `${expiryDate.getSeconds().toString().padStart(2, '0')}`;
                
            // Prepare data for ToyyibPay API
            const formData = new FormData();
            formData.append('userSecretKey', TOYYIBPAY_CONFIG.userSecretKey);
            formData.append('categoryCode', TOYYIBPAY_CONFIG.categoryCode);
            formData.append('billName', `SMAEL ${productCode}`);
            formData.append('billDescription', `Pembelian ${orderData.quantity} unit ${orderData.product}`);
            formData.append('billPriceSetting', 1); // Fixed amount
            formData.append('billPayorInfo', 1); // Require payer information
            formData.append('billAmount', amount * 100); // Convert to cents (RM95.90 = 9590)
            formData.append('billReturnUrl', TOYYIBPAY_CONFIG.returnUrl);
            formData.append('billCallbackUrl', TOYYIBPAY_CONFIG.callbackUrl);
            formData.append('billExternalReferenceNo', billNo);
            formData.append('billTo', orderData.customerName);
            formData.append('billEmail', 'hasrastore@gmail.com'); // Using your email as default
            formData.append('billPhone', orderData.customerPhone);
            formData.append('billSplitPayment', 0); // No split payment
            formData.append('billSplitPaymentArgs', '');
            formData.append('billPaymentChannel', 0); // All payment channels
            formData.append('billContentEmail', 'Terima kasih atas pembelian anda!');
            formData.append('billChargeToCustomer', 1); // Transaction cost deducted from merchant
            formData.append('billExpiryDate', formattedExpiryDate); // Bill expires in 3 days
            
            try {
                // Send request to ToyyibPay API
                const response = await fetch('https://toyyibpay.com/index.php/api/createBill', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.text();
                
                // Log the response for debugging
                console.log('ToyyibPay API response status:', response.status);
                console.log('ToyyibPay API response text:', result);
                
                // Parse the JSON response to get the bill code
                let responseObj;
                try {
                    responseObj = JSON.parse(result);
                } catch (parseError) {
                    console.error('Error parsing JSON response:', parseError);
                    console.error('Raw response:', result);
                    alert('Ralat: Respon tidak sah dari pembekal pembayaran. Sila cuba lagi.');
                    return false;
                }
                
                // Try different ways to get the bill code
                let billCode = null;
                
                if (responseObj.BillCode) {
                    billCode = responseObj.BillCode;
                } else if (Array.isArray(responseObj) && responseObj.length > 0 && responseObj[0].BillCode) {
                    billCode = responseObj[0].BillCode;
                } else if (responseObj.billCode) {
                    billCode = responseObj.billCode;
                } else {
                    console.error('Unexpected response format:', responseObj);
                    alert('Ralat: Format respon tidak dijangka. Sila cuba lagi.');
                    return false;
                }
                
                console.log('Bill code extracted:', billCode);
                console.log('Redirect URL:', `https://toyyibpay.com/${billCode}`);
                
                if (billCode) {
                    // Hide payment loading modal
                    hidePaymentLoading();
                    
                    // Show payment redirect modal
                    showPaymentRedirectModal(billCode);
                    return true;
                } else {
                    console.error('Failed to get bill code:', result);
                    alert('Ralat: Gagal menjana bil pembayaran. Sila cuba lagi.');
                    return false;
                }
            } catch (error) {
                console.error('Error creating ToyyibPay bill:', error);
                alert('Ralat: Tidak dapat menyambung ke pembekal pembayaran. Sila cuba lagi.');
                return false;
            }
        }
        
        // ====================================
        //      CART LOGIC
        // ====================================
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartCountElement = document.getElementById('cart-item-count');
        const cartBodyElement = document.getElementById('cart-body');
        const cartTotalElement = document.getElementById('cart-total');
        const discountInfo = document.getElementById('discount-info');
        const originalPriceElement = document.getElementById('original-price');
        const discountedPriceElement = document.getElementById('discounted-price');
        const savingsAmountElement = document.getElementById('savings-amount');
        
        function updateCartDisplay() {
            cartCountElement.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (cart.length === 0) {
                cartBodyElement.innerHTML = '<p>Your cart is empty.</p>';
                cartTotalElement.textContent = 'RM0.00';
                discountInfo.classList.remove('show');
            } else {
                cartBodyElement.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <img src="${item.img}" alt="${item.name}">
                        <div class="cart-item-details">
                            <strong>${item.name}</strong>
                            <p>Kuantiti: ${item.quantity}</p>
                            <p>Harga: RM${(item.price * item.quantity).toFixed(2)}</p>
                        </div>
                        <button class="remove-item" data-index="${index}"></button>
                    </div>
                `).join('');
                
                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const index = parseInt(e.target.dataset.index);
                        removeFromCart(index);
                    });
                });
                
                // Calculate total and apply discount if applicable
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                let total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                let originalTotal = total;
                
                if (totalItems >= 2) {
                    // Apply discount: RM85.90 per item
                    total = totalItems * 85.90;
                    discountInfo.classList.add('show');
                    originalPriceElement.textContent = `RM${originalTotal.toFixed(2)}`;
                    discountedPriceElement.textContent = `RM${total.toFixed(2)}`;
                    savingsAmountElement.textContent = `RM${(originalTotal - total).toFixed(2)}`;
                } else {
                    discountInfo.classList.remove('show');
                }
                
                cartTotalElement.textContent = `RM${total.toFixed(2)}`;
            }
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
        }
        
        function addToCart(item) {
            const existingItem = cart.find(cartItem => cartItem.name === item.name);
            if (existingItem) {
                existingItem.quantity += item.quantity;
            } else {
                cart.push(item);
            }
            updateCartDisplay();
            
            // Track AddToCart event
            fbq('track', 'AddToCart', {
                content_name: item.name,
                content_category: 'Watches',
                content_ids: [item.name.replace(/\s+/g, '-')],
                content_type: 'product',
                value: item.price,
                currency: 'MYR'
            });
            
            openModal(cartDrawer);
        }
        
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                const { name, price, img } = e.target.dataset;
                addToCart({ name, price: parseFloat(price), img, quantity: 1 });
            });
        });
        
        // ====================================
        //      CHECKOUT FORM VALIDATION
        // ====================================
        const form = document.getElementById('checkout-form');
        const inputs = {
            fullName: document.getElementById('fullName'),
            phone: document.getElementById('phone'),
            address: document.getElementById('address'),
            postcode: document.getElementById('postcode'),
            state: document.getElementById('state'),
            confirmData: document.getElementById('confirm-data')
        };
        const errorMessages = {
            fullName: document.getElementById('fullName-error'),
            phone: document.getElementById('phone-error'),
            address: document.getElementById('address-error'),
            postcode: document.getElementById('postcode-error'),
            state: document.getElementById('state-error'),
            confirm: document.getElementById('confirm-error')
        };
        const paymentOptions = document.querySelectorAll('.payment-option');
        
        // Add real-time validation
        inputs.fullName.addEventListener('blur', () => validateName());
        inputs.phone.addEventListener('blur', () => validatePhone());
        inputs.address.addEventListener('blur', () => validateAddress());
        inputs.postcode.addEventListener('blur', () => validatePostcode());
        inputs.state.addEventListener('change', () => validateState());
        inputs.confirmData.addEventListener('change', () => validateConfirm());
        
        paymentOptions.forEach(option => {
            option.addEventListener('click', () => {
                paymentOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                option.querySelector('input[type="radio"]').checked = true;
            });
        });
        
        function validateName() {
            const name = inputs.fullName.value.trim();
            if (name === '') {
                inputs.fullName.classList.add('is-invalid');
                errorMessages.fullName.classList.add('show');
                return false;
            } else {
                inputs.fullName.classList.remove('is-invalid');
                errorMessages.fullName.classList.remove('show');
                return true;
            }
        }
        
        function validatePhone() {
            const phone = inputs.phone.value.trim();
            const phoneRegex = /^01\d{8,9}$/;
            if (!phoneRegex.test(phone)) {
                inputs.phone.classList.add('is-invalid');
                errorMessages.phone.classList.add('show');
                return false;
            } else {
                inputs.phone.classList.remove('is-invalid');
                errorMessages.phone.classList.remove('show');
                return true;
            }
        }
        
        function validateAddress() {
            const address = inputs.address.value.trim();
            if (address === '') {
                inputs.address.classList.add('is-invalid');
                errorMessages.address.classList.add('show');
                return false;
            } else {
                inputs.address.classList.remove('is-invalid');
                errorMessages.address.classList.remove('show');
                return true;
            }
        }
        
        function validatePostcode() {
            const postcode = inputs.postcode.value.trim();
            const postcodeRegex = /^\d{5}$/;
            if (!postcodeRegex.test(postcode)) {
                inputs.postcode.classList.add('is-invalid');
                errorMessages.postcode.classList.add('show');
                return false;
            } else {
                inputs.postcode.classList.remove('is-invalid');
                errorMessages.postcode.classList.remove('show');
                return true;
            }
        }
        
        function validateState() {
            const state = inputs.state.value;
            if (state === '') {
                inputs.state.classList.add('is-invalid');
                errorMessages.state.classList.add('show');
                return false;
            } else {
                inputs.state.classList.remove('is-invalid');
                errorMessages.state.classList.remove('show');
                return true;
            }
        }
        
        function validateConfirm() {
            if (!inputs.confirmData.checked) {
                errorMessages.confirm.classList.add('show');
                return false;
            } else {
                errorMessages.confirm.classList.remove('show');
                return true;
            }
        }
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const isNameValid = validateName();
            const isPhoneValid = validatePhone();
            const isAddressValid = validateAddress();
            const isPostcodeValid = validatePostcode();
            const isStateValid = validateState();
            const isConfirmed = validateConfirm();
            
            if (isNameValid && isPhoneValid && isAddressValid && isPostcodeValid && isStateValid && isConfirmed) {
                // Disable the submit button to prevent multiple submissions
                const submitButton = form.querySelector('button[type="submit"]');
                submitButton.disabled = true;
                submitButton.textContent = 'Memproses...';
                
                // Show loading overlay
                showLoading();
                
                // Get form data
                const selectedPayment = form.querySelector('input[name="payment"]:checked').value;
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                let totalAmount = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                
                // Apply discount if applicable
                if (totalItems >= 2) {
                    totalAmount = totalItems * 85.90;
                }
                
                // Add COD fee if applicable
                if (selectedPayment === 'cod') {
                    totalAmount += 15.00;
                }
                
                // Prepare order data for Telegram
                const productNames = cart.map(item => item.name).join(', ');
                const orderData = {
                    product: productNames,
                    quantity: totalItems,
                    total: totalAmount,
                    paymentMethod: selectedPayment === 'online' ? 'Online Payment' : 'COD',
                    customerName: inputs.fullName.value,
                    customerPhone: inputs.phone.value,
                    customerAddress: inputs.address.value,
                    poskod: inputs.postcode.value,
                    customerState: inputs.state.value,
                    paymentStatus: selectedPayment === 'online' ? 'Pending' : 'Pending'
                };
                
                try {
                    // Simulate a delay to show loading for at least 2 seconds
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Send Telegram notification
                    await sendTelegramNotification(orderData);
                    
                    // Track InitiateCheckout event
                    fbq('track', 'InitiateCheckout', {
                        content_ids: cart.map(item => item.name.replace(/\s+/g, '-')),
                        content_type: 'product',
                        value: totalAmount,
                        currency: 'MYR',
                        num_items: totalItems
                    });
                    
                    // Prepare success modal content
                    const successContent = document.getElementById('success-message-content');
                    
                    if (selectedPayment === 'cod') {
                        successContent.innerHTML = `
                            <p>Terima kasih. Sila sediakan wang tunai secukupnya (RM${totalAmount.toFixed(2)}) untuk dibayar kepada posmen. Team kami akan hubungi anda untuk pengesahan.</p>
                        `;
                    } else {
                        successContent.innerHTML = `
                            <p>Sila lengkapkan pembayaran anda untuk kami proses pesanan anda dengan segera.</p>
                            <button class="btn btn-gold" style="margin-top: 15px;" id="make-payment-btn">Buat Pembayaran Sekarang</button>
                        `;
                        
                        // Add event listener to payment button
                        document.getElementById('make-payment-btn').addEventListener('click', async () => {
                            // Show payment loading modal immediately
                            showPaymentLoading();
                            
                            // Track Purchase event for online payment
                            fbq('track', 'Purchase', {
                                content_ids: cart.map(item => item.name.replace(/\s+/g, '-')),
                                content_type: 'product',
                                value: totalAmount,
                                currency: 'MYR',
                                num_items: totalItems
                            });
                            
                            // Redirect to ToyyibPay
                            await redirectToToyyibPay(orderData);
                        });
                    }
                    
                    document.getElementById('order-id').textContent = `#HS${Math.floor(1000 + Math.random() * 9000)}`;
                    document.getElementById('order-date').textContent = new Date().toLocaleString('ms-MY');
                    document.getElementById('order-total').textContent = `RM${totalAmount.toFixed(2)}`;
                    
                    // Hide loading overlay
                    hideLoading();
                    
                    // Close checkout modal and open success modal
                    closeModal();
                    openModal(successModal);
                    
                    // Clear cart after successful order
                    cart = [];
                    updateCartDisplay();
                    
                    // Track Purchase event for COD
                    if (selectedPayment === 'cod') {
                        fbq('track', 'Purchase', {
                            content_ids: cart.map(item => item.name.replace(/\s+/g, '-')),
                            content_type: 'product',
                            value: totalAmount,
                            currency: 'MYR',
                            num_items: totalItems
                        });
                    }
                } catch (error) {
                    console.error('Error processing order:', error);
                    hideLoading();
                    alert('Ralat semasa memproses tempahan. Sila cuba lagi.');
                    
                    // Re-enable the submit button in case of error
                    submitButton.disabled = false;
                    submitButton.textContent = 'Buat Pesanan Sekarang';
                }
            }
        });
        
        // ====================================
        //      INITIALIZATION
        // ====================================
        startCountdown();
        updateCartDisplay();
        document.getElementById('current-year').textContent = new Date().getFullYear();
    });
    </script>
</body>
</html>